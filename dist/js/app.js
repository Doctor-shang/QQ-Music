"use strict";!function(n,i){function e(i){var e=new Image;e.src=i,e.onload=function(){n(".img-box .img").css({backgroundImage:"url("+i+")"}),n(".wrapper-img").css({backgroundImage:"url("+i+")"})}}function o(i,e,o,s){n(".song-info").html('<div class="song-name">'+i+'</div>        <div class="singer-name">'+e+'</div>        <div class="album-name">专辑:'+o+"</div>")}function s(i){i?n(".control .like").addClass("likeing"):n(".control .like").removeClass("likeing")}function a(n){e(n.image),o(n.song,n.singer,n.album),s(n.isLike)}i.render=a}(window.Zepto,window.player||(window.player={}));
"use strict";!function(n,t){function i(n){var t=parseInt(n/60),i=parseInt(n%60);return""+(10>t?"0"+t:t)+":"+(10>i?"0"+i:i)}function e(t){n(".all-time").html(i(t)),f=t}function o(t){n(".cur-time").html(i(t/1e3)),n(".pro-top").css("width",t/10/f+"%")}function r(){function t(){m=(new Date).getTime(),a+=m-(u||m),o(a),p=requestAnimationFrame(function(){a/1e3>f?n(".control .next").trigger("click"):t()}),u=m}cancelAnimationFrame(p),t()}function c(){cancelAnimationFrame(p)}function l(){a=0,n(".cur-time").html("00:00")}var a=0,u=null,m=null,p=null,f=null,w=n(".pro-wrap").width();t.pro={renderAllTime:e,play:r,pause:c,init:l},function(n,t){n(".pro-wrap").on("click",function(n){var t=(n.clientX-60)*f/w;audio.setTime(t),a=1e3*t,o(a)})}(n,t)}(window.Zepto,window.player||(window.player={}));
"use strict";!function(n,i){function o(i){for(var o=0;o<i.length;o++){var e=n('<li class="songName">'+i[o].song+"</li>");n(".list-box ul").append(e)}}i.listRender=o}(window.Zepto,window.player||(window.player={}));
"use strict";!function(o,t){o("body").on("play:change",function(o,n){t.render(songData[n]),audio.getAudio(songData[n].audio),pro.renderAllTime(songData[n].duration),"play"==audio.status&&(audio.play(),pro.play()),rotate.reset(),pro.init()}),o(".control .like").on("click",function(){o(this).toggleClass("likeing"),songData[nowIndex].isLike=!songData[nowIndex].isLike}),o(".control .prev").on("click",function(){var t=index.prev();o("body").trigger("play:change",t)}),o(".control .play").on("click",function(){o(this).toggleClass("pause"),"pause"==audio.status?(audio.play(),rotate.startRotate(),pro.play()):(audio.pause(),rotate.stopRotate(),pro.pause())}),o(".control .next").on("click",function(){var t=index.next();o("body").trigger("play:change",t)}),o(".control .list").on("click",function(t){o(".list-box").toggleClass("hide"),o(document).one("click",function(){o(".list-box").toggleClass("hide")}),t.stopPropagation()}),o(".list-box ").on("click",".songName",function(){var t=index.getIndex(o(this).index()-1);o("body").trigger("play:change",t)}),o(".list-box .title").on("click",function(){return!1})}(window.Zepto,window.player||(window.player={}));
"use strict";!function(i,t){function o(){this.audio=new Audio,this.status="pause",this.img=i(".song-img .img-box .img")}o.prototype={play:function(){this.audio.play(),this.status="play"},pause:function(){this.audio.pause(),this.status="pause"},getAudio:function(i){this.audio.src=i,this.audio.load()},setTime:function(i){this.audio.currentTime=i}},t.AudioCtrol=o}(window.Zepto,window.player||(window.player={}));
"use strict";!function(n,e){function t(){this.index=0,this.len=len}t.prototype={prev:function(){return this.getIndex("prev")},next:function(){return this.getIndex("next")},getIndex:function(n){return"prev"==n?this.index=(this.index-1+this.len)%this.len:"next"==n?this.index=(this.index+1+this.len)%this.len:this.index=n,this.index}},e.IndexControl=t}(window.Zepto,window.player||(window.player={}));
"use strict";!function(t,i){function e(){this.deg=null,this.timer=null,this.img=t(".song-img .img-box .img")}e.prototype={startRotate:function(){var t=this;this.deg=+this.img.attr("data-deg"),clearInterval(this.timer),this.timer=setInterval(function(){t.deg+=2,t.img.attr("data-deg",t.deg),t.img.css({transform:"rotate("+t.deg+"deg)",transition:"transform linear 0.2s"})},200)},stopRotate:function(){clearInterval(this.timer)},reset:function(){this.deg=0,this.img.attr("data-deg",0),this.img.css({transform:"rotate(0deg)",transition:"none"})}},i.rotate=new e}(window.Zepto,window.player||(window.player={}));
"use strict";function getData(o){$.ajax({type:"GET",url:o,success:function(o){songData=o,len=o.length,root.render(songData[0]),pro.renderAllTime(songData[0].duration),audio.getAudio(songData[0].audio),index=new root.IndexControl,root.listRender(o)},error:function(){}})}var root=window.player,songData=null,len=null,audio=new root.AudioCtrol,rotate=root.rotate,index,pro=root.pro;getData("../../resource/data.json");